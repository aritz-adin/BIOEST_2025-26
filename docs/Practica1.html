<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Aritz Adin">
<meta name="dcterms.date" content="2025-08-10">

<title>Práctica 1: Lectura y manejo de ficheros – BIOEST 2025-26</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-dfb324f25d9b1687192fa8be62ac8f9c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">BIOEST 2025-26</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.md"> 
<span class="menu-text">Programa</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Practica0.html"> 
<span class="menu-text">Práctica 0</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./Practica1.html" aria-current="page"> 
<span class="menu-text">Práctica 1</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#trabajar-con-ficheros" id="toc-trabajar-con-ficheros" class="nav-link active" data-scroll-target="#trabajar-con-ficheros">1. Trabajar con ficheros</a>
  <ul class="collapse">
  <li><a href="#visualización-de-ficheros" id="toc-visualización-de-ficheros" class="nav-link" data-scroll-target="#visualización-de-ficheros">1.1. Visualización de ficheros</a></li>
  <li><a href="#selección-de-filas-individuos-y-columnas-variables." id="toc-selección-de-filas-individuos-y-columnas-variables." class="nav-link" data-scroll-target="#selección-de-filas-individuos-y-columnas-variables.">1.2. Selección de filas (individuos) y columnas (variables).</a></li>
  </ul></li>
  <li><a href="#lectura-de-ficheros-externos" id="toc-lectura-de-ficheros-externos" class="nav-link" data-scroll-target="#lectura-de-ficheros-externos">2. Lectura de ficheros externos</a>
  <ul class="collapse">
  <li><a href="#descarga-el-fichero-bodyfat.txt-desde-miaulario.-léelo-en-r-y-almacénalo-en-un-objeto-llamado-datos.-imprímelo-por-pantalla" id="toc-descarga-el-fichero-bodyfat.txt-desde-miaulario.-léelo-en-r-y-almacénalo-en-un-objeto-llamado-datos.-imprímelo-por-pantalla" class="nav-link" data-scroll-target="#descarga-el-fichero-bodyfat.txt-desde-miaulario.-léelo-en-r-y-almacénalo-en-un-objeto-llamado-datos.-imprímelo-por-pantalla">2.1. Descarga el fichero <code>Bodyfat.txt</code> desde MiAulario. Léelo en <code>R</code> y almacénalo en un objeto llamado <code>datos</code>. Imprímelo por pantalla</a></li>
  <li><a href="#realiza-los-siguientes-ejercicios" id="toc-realiza-los-siguientes-ejercicios" class="nav-link" data-scroll-target="#realiza-los-siguientes-ejercicios">2.2. Realiza los siguientes ejercicios</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Práctica 1: Lectura y manejo de ficheros</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Aritz Adin </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">08/10/2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="trabajar-con-ficheros" class="level1">
<h1>1. Trabajar con ficheros</h1>
<section id="visualización-de-ficheros" class="level2">
<h2 class="anchored" data-anchor-id="visualización-de-ficheros">1.1. Visualización de ficheros</h2>
<p>Carga la librería <code>PASWR2</code> para trabajar con el fichero <code>EPIDURAL</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(PASWR2)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"EPIDURAL"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Visualiza los primeros 6 registros del fichero <code>EPIDURAL</code> con el comando <code>head()</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(EPIDURAL)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  doctor  kg  cm       ease           treatment oc complications
1  Dr. B 116 172  Difficult Traditional Sitting  0          None
2  Dr. C  86 176       Easy   Hamstring Stretch  0          None
3  Dr. B  72 157  Difficult Traditional Sitting  0          None
4  Dr. B  63 169       Easy   Hamstring Stretch  2          None
5  Dr. B 114 163 Impossible Traditional Sitting  0          None
6  Dr. B 121 163  Difficult   Hamstring Stretch  3          None</code></pre>
</div>
</div>
<ul>
<li>Visualiza los primeros 20 registros del fichero <code>EPIDURAL</code> con el comando <code>head()</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(EPIDURAL, <span class="at">n=</span><span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   doctor  kg  cm       ease           treatment oc complications
1   Dr. B 116 172  Difficult Traditional Sitting  0          None
2   Dr. C  86 176       Easy   Hamstring Stretch  0          None
3   Dr. B  72 157  Difficult Traditional Sitting  0          None
4   Dr. B  63 169       Easy   Hamstring Stretch  2          None
5   Dr. B 114 163 Impossible Traditional Sitting  0          None
6   Dr. B 121 163  Difficult   Hamstring Stretch  3          None
7   Dr. D  90 170  Difficult   Hamstring Stretch  2   Paresthesia
8   Dr. B  87 164  Difficult Traditional Sitting  6          None
9   Dr. D  74 166       Easy   Hamstring Stretch  0          None
10  Dr. C  91 175       Easy   Hamstring Stretch  1          None
11  Dr. A  67 167       Easy Traditional Sitting  6          None
12  Dr. C  65 155       Easy Traditional Sitting  2          None
13  Dr. C  91 163  Difficult   Hamstring Stretch  2   Paresthesia
14  Dr. C  48 152       Easy   Hamstring Stretch  0          None
15  Dr. C  85 168       Easy   Hamstring Stretch  2   Paresthesia
16  Dr. C  80 173       Easy   Hamstring Stretch  0          None
17  Dr. D 114 168 Impossible   Hamstring Stretch  1          None
18  Dr. D  75 157       Easy Traditional Sitting  0   Paresthesia
19  Dr. D  59 152       Easy   Hamstring Stretch  0          None
20  Dr. A  57 165       Easy   Hamstring Stretch  1          None</code></pre>
</div>
</div>
<ul>
<li>Calcula cuántos registros y cuantas variables tiene el fichero <code>EPIDURAL</code> con el comando <code>dim()</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(EPIDURAL)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 85  7</code></pre>
</div>
</div>
<ul>
<li>Calcula cuántos registros y cuantas variables tiene el fichero <code>EPIDURAL</code> con el comando <code>str()</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(EPIDURAL)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   85 obs. of  7 variables:
 $ doctor       : Factor w/ 4 levels "Dr. A","Dr. B",..: 2 3 2 2 2 2 4 2 4 3 ...
 $ kg           : int  116 86 72 63 114 121 90 87 74 91 ...
 $ cm           : int  172 176 157 169 163 163 170 164 166 175 ...
 $ ease         : Factor w/ 3 levels "Difficult","Easy",..: 1 2 1 2 3 1 1 1 2 2 ...
 $ treatment    : Factor w/ 2 levels "Hamstring Stretch",..: 2 1 2 1 2 1 1 2 1 1 ...
 $ oc           : int  0 0 0 2 0 3 2 6 0 1 ...
 $ complications: Factor w/ 5 levels "Failure - person got dizzy",..: 3 3 3 3 3 3 4 3 3 3 ...</code></pre>
</div>
</div>
</section>
<section id="selección-de-filas-individuos-y-columnas-variables." class="level2">
<h2 class="anchored" data-anchor-id="selección-de-filas-individuos-y-columnas-variables.">1.2. Selección de filas (individuos) y columnas (variables).</h2>
<ul>
<li>Selecciona la variable <code>doctor</code> del fichero <code>EPIDURAL</code> y visualízala en pantalla</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#EPIDURAL[,"doctor"]</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>EPIDURAL<span class="sc">$</span>doctor</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] Dr. B Dr. C Dr. B Dr. B Dr. B Dr. B Dr. D Dr. B Dr. D Dr. C Dr. A Dr. C
[13] Dr. C Dr. C Dr. C Dr. C Dr. D Dr. D Dr. D Dr. A Dr. A Dr. C Dr. C Dr. B
[25] Dr. B Dr. D Dr. D Dr. A Dr. B Dr. B Dr. D Dr. C Dr. C Dr. A Dr. A Dr. A
[37] Dr. A Dr. B Dr. D Dr. D Dr. A Dr. D Dr. D Dr. D Dr. A Dr. C Dr. A Dr. A
[49] Dr. C Dr. A Dr. C Dr. C Dr. B Dr. D Dr. D Dr. B Dr. D Dr. A Dr. A Dr. B
[61] Dr. B Dr. B Dr. C Dr. C Dr. D Dr. A Dr. D Dr. C Dr. A Dr. A Dr. A Dr. A
[73] Dr. C Dr. B Dr. C Dr. C Dr. B Dr. B Dr. B Dr. D Dr. D Dr. B Dr. A Dr. A
[85] Dr. A
Levels: Dr. A Dr. B Dr. C Dr. D</code></pre>
</div>
</div>
<ul>
<li>Selecciona la variable <code>kg</code> del fichero <code>EPIDURAL</code> y visualízala en pantalla</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>EPIDURAL<span class="sc">$</span>kg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 116  86  72  63 114 121  90  87  74  91  67  65  91  48  85  80 114  75  59
[20]  57 105  83  71 108  98  74 134  83  86  76  82  59  75  61 106  81 103 113
[39]  60  90 142  83  83  89  67  90  71  66  95  70  94  85  86 131  67  97  93
[58]  90  84  59 112  86  74  92 168  80  79  84  63  85  79  79  77  93  57  96
[77]  79  69  72 104  89  86 103  72  94</code></pre>
</div>
</div>
<ul>
<li>Selecciona la variable <code>cm</code> del fichero <code>EPIDURAL</code> y visualízala en pantalla</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>EPIDURAL<span class="sc">$</span>cm</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 172 176 157 169 163 163 170 164 166 175 167 155 163 152 168 173 168 157 152
[20] 165 165 168 152 175 176 155 169 170 175 165 173 168 173 163 165 163 161 166
[39] 165 171 170 160 160 173 160 168 163 160 170 165 185 163 165 175 159 162 160
[58] 163 164 157 170 170 168 163 168 157 163 160 163 165 168 160 157 170 160 180
[77] 160 157 170 169 172 156 170 160 165</code></pre>
</div>
</div>
<ul>
<li>Crea una nueva variable llamada <code>ratio</code> definida como el cociente entre <code>kg</code>/<code>cm</code>. Añádela al fichero <code>EPIDURAL</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>EPIDURAL<span class="sc">$</span>ratio <span class="ot">&lt;-</span> EPIDURAL<span class="sc">$</span>kg<span class="sc">/</span>EPIDURAL<span class="sc">$</span>cm</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(EPIDURAL)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  doctor  kg  cm       ease           treatment oc complications     ratio
1  Dr. B 116 172  Difficult Traditional Sitting  0          None 0.6744186
2  Dr. C  86 176       Easy   Hamstring Stretch  0          None 0.4886364
3  Dr. B  72 157  Difficult Traditional Sitting  0          None 0.4585987
4  Dr. B  63 169       Easy   Hamstring Stretch  2          None 0.3727811
5  Dr. B 114 163 Impossible Traditional Sitting  0          None 0.6993865
6  Dr. B 121 163  Difficult   Hamstring Stretch  3          None 0.7423313</code></pre>
</div>
</div>
<ul>
<li><strong>EJERCICIO</strong> Crea una nueva variable llamada <code>IMC</code> (índice de masa corporal) definida como <span class="math inline">\(kg/(m^2)\)</span>. Añádela al fichero <code>EPIDURAL</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>EPIDURAL<span class="sc">$</span>IMC <span class="ot">&lt;-</span> EPIDURAL<span class="sc">$</span>kg<span class="sc">/</span>(EPIDURAL<span class="sc">$</span>cm<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(EPIDURAL)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  doctor  kg  cm       ease           treatment oc complications     ratio
1  Dr. B 116 172  Difficult Traditional Sitting  0          None 0.6744186
2  Dr. C  86 176       Easy   Hamstring Stretch  0          None 0.4886364
3  Dr. B  72 157  Difficult Traditional Sitting  0          None 0.4585987
4  Dr. B  63 169       Easy   Hamstring Stretch  2          None 0.3727811
5  Dr. B 114 163 Impossible Traditional Sitting  0          None 0.6993865
6  Dr. B 121 163  Difficult   Hamstring Stretch  3          None 0.7423313
       IMC
1 39.21038
2 27.76343
3 29.21011
4 22.05805
5 42.90715
6 45.54180</code></pre>
</div>
</div>
<ul>
<li>Selecciona la paciente número 19 del fichero <code>EPIDURAL</code>. Visualízala por pantalla y averigua cuánto pesa y cuánto mide</li>
</ul>
<!-- * Elimina la paciente 1 del fichero `EPIDURAL` -->
<!-- ```{r include=FALSE} -->
<!-- head(EPIDURAL[-1, ]) -->
<!-- ``` -->
<!-- * Elimina la variable `doctor` del fichero `EPIDURAL` -->
<!-- ```{r include=FALSE} -->
<!-- head(EPIDURAL[,-1]) -->
<!-- ``` -->
<ul>
<li>Crea un nuevo fichero llamado <code>datos1</code> con aquellas pacientes que pesen menos de 85 kg. ¿Cuántos registros tiene el fichero <code>datos1</code>?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>pos <span class="ot">&lt;-</span> <span class="fu">which</span>(EPIDURAL<span class="sc">$</span>kg<span class="sc">&lt;</span><span class="dv">85</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>datos1 <span class="ot">&lt;-</span> EPIDURAL[pos, ]</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   doctor kg  cm      ease           treatment oc complications     ratio
3   Dr. B 72 157 Difficult Traditional Sitting  0          None 0.4585987
4   Dr. B 63 169      Easy   Hamstring Stretch  2          None 0.3727811
9   Dr. D 74 166      Easy   Hamstring Stretch  0          None 0.4457831
11  Dr. A 67 167      Easy Traditional Sitting  6          None 0.4011976
12  Dr. C 65 155      Easy Traditional Sitting  2          None 0.4193548
14  Dr. C 48 152      Easy   Hamstring Stretch  0          None 0.3157895
        IMC
3  29.21011
4  22.05805
9  26.85441
11 24.02381
12 27.05515
14 20.77562</code></pre>
</div>
</div>
<ul>
<li>Crea un nuevo fichero llamado <code>datos2</code> con aquellas pacientes que midan más de 170 cm. ¿Cuántos registros tiene el fichero <code>datos2</code>?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>pos <span class="ot">&lt;-</span> <span class="fu">which</span>(EPIDURAL<span class="sc">$</span>cm<span class="sc">&gt;</span><span class="dv">170</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>datos2 <span class="ot">&lt;-</span> EPIDURAL[pos, ]</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   doctor  kg  cm       ease           treatment oc complications     ratio
1   Dr. B 116 172  Difficult Traditional Sitting  0          None 0.6744186
2   Dr. C  86 176       Easy   Hamstring Stretch  0          None 0.4886364
10  Dr. C  91 175       Easy   Hamstring Stretch  1          None 0.5200000
16  Dr. C  80 173       Easy   Hamstring Stretch  0          None 0.4624277
24  Dr. B 108 175 Impossible Traditional Sitting  5          None 0.6171429
25  Dr. B  98 176       Easy Traditional Sitting  1          None 0.5568182
        IMC
1  39.21038
2  27.76343
10 29.71429
16 26.72993
24 35.26531
25 31.63740</code></pre>
</div>
</div>
<ul>
<li>Crea un nuevo fichero llamado <code>datos3</code> con aquellas pacientes que midan más de 170 cm o menos de 165 cm. ¿Cuántos registros tiene el fichero <code>datos3</code>?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>pos <span class="ot">&lt;-</span> <span class="fu">which</span>(EPIDURAL<span class="sc">$</span>cm<span class="sc">&gt;</span><span class="dv">170</span> <span class="sc">|</span> EPIDURAL<span class="sc">$</span>cm<span class="sc">&lt;</span><span class="dv">165</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>datos3 <span class="ot">&lt;-</span> EPIDURAL[pos, ]</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  doctor  kg  cm       ease           treatment oc complications     ratio
1  Dr. B 116 172  Difficult Traditional Sitting  0          None 0.6744186
2  Dr. C  86 176       Easy   Hamstring Stretch  0          None 0.4886364
3  Dr. B  72 157  Difficult Traditional Sitting  0          None 0.4585987
5  Dr. B 114 163 Impossible Traditional Sitting  0          None 0.6993865
6  Dr. B 121 163  Difficult   Hamstring Stretch  3          None 0.7423313
8  Dr. B  87 164  Difficult Traditional Sitting  6          None 0.5304878
       IMC
1 39.21038
2 27.76343
3 29.21011
5 42.90715
6 45.54180
8 32.34682</code></pre>
</div>
</div>
<ul>
<li>Crea un nuevo fichero llamado <code>datos4</code> con aquellas pacientes que midan más de 165 cm y menos de 170 cm. ¿Cuántos registros tiene el fichero <code>datos4</code>?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>pos <span class="ot">&lt;-</span> <span class="fu">which</span>(EPIDURAL<span class="sc">$</span>cm<span class="sc">&gt;</span><span class="dv">165</span> <span class="sc">&amp;</span> EPIDURAL<span class="sc">$</span>cm<span class="sc">&lt;</span><span class="dv">170</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>datos4 <span class="ot">&lt;-</span> EPIDURAL[pos, ]</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   doctor  kg  cm       ease           treatment oc complications     ratio
4   Dr. B  63 169       Easy   Hamstring Stretch  2          None 0.3727811
9   Dr. D  74 166       Easy   Hamstring Stretch  0          None 0.4457831
11  Dr. A  67 167       Easy Traditional Sitting  6          None 0.4011976
15  Dr. C  85 168       Easy   Hamstring Stretch  2   Paresthesia 0.5059524
17  Dr. D 114 168 Impossible   Hamstring Stretch  1          None 0.6785714
22  Dr. C  83 168       Easy Traditional Sitting  1          None 0.4940476
        IMC
4  22.05805
9  26.85441
11 24.02381
15 30.11621
17 40.39116
22 29.40760</code></pre>
</div>
</div>
<ul>
<li>Crea un nuevo fichero llamado <code>datos5</code> con aquellas pacientes atendidas por el Doctor A. ¿Cuántos registros tiene el fichero <code>datos5</code>?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>pos <span class="ot">&lt;-</span> <span class="fu">which</span>(EPIDURAL<span class="sc">$</span>doctor<span class="sc">==</span><span class="st">"Dr. A"</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>datos5 <span class="ot">&lt;-</span> EPIDURAL[pos, ]</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   doctor  kg  cm      ease           treatment oc          complications
11  Dr. A  67 167      Easy Traditional Sitting  6                   None
20  Dr. A  57 165      Easy   Hamstring Stretch  1                   None
21  Dr. A 105 165 Difficult   Hamstring Stretch 10 Failure - too many OCs
28  Dr. A  83 170      Easy Traditional Sitting  1                   None
34  Dr. A  61 163      Easy Traditional Sitting  1                   None
35  Dr. A 106 165      Easy Traditional Sitting  2                   None
       ratio      IMC
11 0.4011976 24.02381
20 0.3454545 20.93664
21 0.6363636 38.56749
28 0.4882353 28.71972
34 0.3742331 22.95909
35 0.6424242 38.93480</code></pre>
</div>
</div>
</section>
</section>
<section id="lectura-de-ficheros-externos" class="level1">
<h1>2. Lectura de ficheros externos</h1>
<section id="descarga-el-fichero-bodyfat.txt-desde-miaulario.-léelo-en-r-y-almacénalo-en-un-objeto-llamado-datos.-imprímelo-por-pantalla" class="level2">
<h2 class="anchored" data-anchor-id="descarga-el-fichero-bodyfat.txt-desde-miaulario.-léelo-en-r-y-almacénalo-en-un-objeto-llamado-datos.-imprímelo-por-pantalla">2.1. Descarga el fichero <code>Bodyfat.txt</code> desde MiAulario. Léelo en <code>R</code> y almacénalo en un objeto llamado <code>datos</code>. Imprímelo por pantalla</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"BodyFat.txt"</span>,<span class="at">header=</span><span class="cn">TRUE</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>datos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   age  fat sex
1   23  9.5   M
2   23 27.9   F
3   27  7.8   M
4   27 17.8   M
5   39 31.4   F
6   41 25.9   F
7   45 27.4   M
8   49 25.2   F
9   50 31.1   F
10  53 34.7   F
11  53 42.0   F
12  54 29.1   F
13  56 32.5   F
14  57 30.3   F
15  58 33.0   F
16  58 33.8   F
17  60 41.1   F
18  61 34.5   F</code></pre>
</div>
</div>
<!-- ## 2.2. Descarga el fichero `Bodyfat.xlsx` desde MiAulario. Léelo en `R` y almacénalo en un objeto llamado `datos2`. Imprímelo por pantalla -->
<!-- ```{r, message=FALSE, warning=FALSE, include=FALSE} -->
<!-- library(xlsx) -->
<!-- datos2 <- read.xlsx("Bodyfat.xlsx", sheetIndex="Hoja1") -->
<!-- datos2 -->
<!-- ``` -->
</section>
<section id="realiza-los-siguientes-ejercicios" class="level2">
<h2 class="anchored" data-anchor-id="realiza-los-siguientes-ejercicios">2.2. Realiza los siguientes ejercicios</h2>
<ul>
<li>Con el fichero <code>datos</code>, visualiza en pantalla la variable <code>fat</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>datos<span class="sc">$</span>fat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  9.5 27.9  7.8 17.8 31.4 25.9 27.4 25.2 31.1 34.7 42.0 29.1 32.5 30.3 33.0
[16] 33.8 41.1 34.5</code></pre>
</div>
</div>
<ul>
<li>Selecciona las observaciones de las variable <code>fat</code> cuyo valor sea menor que 25 y guárdalas en un objeto llamado <code>low.fat</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>pos <span class="ot">&lt;-</span> <span class="fu">which</span>(datos<span class="sc">$</span>fat<span class="sc">&lt;</span><span class="dv">25</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>low.fat <span class="ot">&lt;-</span> datos[pos,]</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>low.fat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  age  fat sex
1  23  9.5   M
3  27  7.8   M
4  27 17.8   M</code></pre>
</div>
</div>
<ul>
<li>Utiliza el comando <code>table</code> para averiguar cuántos hombres y mujeres hay en el fichero <code>datos</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos<span class="sc">$</span>sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 F  M 
14  4 </code></pre>
</div>
</div>
<ul>
<li>Haz un <em>summary</em> del fichero <code>datos</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(datos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      age             fat            sex           
 Min.   :23.00   Min.   : 7.80   Length:18         
 1st Qu.:39.50   1st Qu.:26.27   Class :character  
 Median :51.50   Median :30.70   Mode  :character  
 Mean   :46.33   Mean   :28.61                     
 3rd Qu.:56.75   3rd Qu.:33.60                     
 Max.   :61.00   Max.   :42.00                     </code></pre>
</div>
</div>
<!-- * Elimina la variable `fat` del fichero `datos` -->
<!-- ```{r include=FALSE} -->
<!-- datos[,-2] -->
<!-- ``` -->
<!-- * Elimina las observaciones 7, 9 y 15 del fichero `datos` -->
<!-- ```{r include=FALSE} -->
<!-- datos[-c(7,9,15),] -->
<!-- ``` -->
<ul>
<li>Utiliza la función <code>eda()</code> del paquete <code>PASWR2</code> para realizar un análisis exploratorio de la variable <code>fat</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">eda</span>(datos<span class="sc">$</span>fat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Practica1_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Size (n)  Missing  Minimum   1st Qu     Mean   Median   TrMean   3rd Qu 
  18.000    0.000    7.800   26.275   28.611   30.700   28.611   33.600 
     Max    Stdev      Var  SE Mean   I.Q.R.    Range Kurtosis Skewness 
  42.000    9.144   83.620    2.155    7.325   34.200    0.141   -0.888 
SW p-val 
   0.043 </code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>